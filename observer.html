<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>æ€§èƒ½ç›‘æ§</title>

    <button onclick="handleChangeUrl">åˆ‡æ¢é¡µé¢</button>
  </head>

  <body>
    <script>
      const handleChangeUrl = () => {
        window.location.replace('baidu.com');
      };
      //   window.open('https://www.baidu.com/');
      window.onload = function () {
        // é€šè¿‡Performance timing APIè·å–
        // const performanceTiming = window.performance.timing;
        // const {
        //   connectEnd,
        //   connectStart,
        //   domComplete,
        //   domContentLoadedEventEnd,
        //   domContentLoadedEventStart,
        //   domInteractive,
        //   domLoading,
        //   domainLookupEnd,
        //   domainLookupStart,
        //   fetchStart,
        //   loadEventEnd,
        //   loadEventStart,
        //   navigationStart,
        //   redirectEnd,
        //   redirectStart,
        //   requestStart,
        //   responseEnd,
        //   responseStart,
        //   secureConnectionStart,
        //   unloadEventEnd,
        //   unloadEventStart,
        // } = performanceTiming;
        // console.log(performanceTiming);
        // console.log(
        //   `ğŸ¨ Prompt for unload: ${navigationStart}`,
        //   `\nğŸ redirect: ${redirectEnd - redirectStart}`,
        //   `\nğŸ„ unload: ${unloadEventEnd - unloadEventStart}`,
        //   `\nâŒ›ï¸ App cache: ${domainLookupStart - fetchStart}`,
        //   `\nğŸ§© DNS: ${domainLookupEnd - domainLookupStart}`,
        //   `\nâš½ TCP: ${connectEnd - connectStart}`,
        //   `\nğŸ‘– Request: ${responseStart - requestStart}`,
        //   `\nğŸ©± Response: ${responseEnd - responseStart}`,
        //   `\nğŸ‘š Processing: ${domComplete - domLoading}`,
        //   `\nğŸ›ï¸ onload: ${loadEventEnd - loadEventStart}`
        // );

        // é€šè¿‡Performance getEntries APIè·å–
        const entries = window.performance.getEntries();
        console.log(entries[0]);
        const {
          connectEnd,
          connectStart,
          domComplete,
          domContentLoadedEventEnd,
          domContentLoadedEventStart,
          domInteractive,
          domLoading,
          domainLookupEnd,
          domainLookupStart,
          fetchStart,
          loadEventEnd,
          loadEventStart,
          navigationStart,
          redirectEnd,
          redirectStart,
          requestStart,
          responseEnd,
          responseStart,
          secureConnectionStart,
          unloadEventEnd,
          unloadEventStart,
        } = entries[0];
        console.log(
          `ğŸ¨ Prompt for unload: ${navigationStart}`,
          `\nğŸ redirect: ${redirectEnd - redirectStart}`,
          `\nğŸ„ unload: ${unloadEventEnd - unloadEventStart}`,
          `\nâŒ›ï¸ App cache: ${domainLookupStart - fetchStart}`,
          `\nğŸ§© DNS: ${domainLookupEnd - domainLookupStart}`,
          `\nâš½ TCP: ${connectEnd - connectStart}`,
          `\nğŸ‘– Request: ${responseStart - requestStart}`,
          `\nğŸ©± Response: ${responseEnd - responseStart}`,
          `\nğŸ‘š Processing: ${domComplete - domLoading}`,
          `\nğŸ›ï¸ onload: ${loadEventEnd - loadEventStart}`
        );
        // é€šè¿‡PerformanceObserverè·å–
        const config = {
          entryTypes: ['paint'],
          //   entryTypes: ['navigation', 'resource', 'mark', 'measure', 'paint'],
        };

        const observer = new PerformanceObserver((list) => {
          list.getEntries().forEach((entry) => {
            // åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤ºæ¯ä¸ªæŠ¥å‘Šçš„æµ‹é‡
            console.log(
              entry,
              `Name: ${entry.name}`,
              `Type: ${entry.entryType}`,
              `Start: ${entry.startTime}`,
              `Duration: ${entry.duration}`
            );
          });
        });

        // å¼€å§‹è§‚å¯Ÿ
        observer.observe(config);
        // performance.mark('registered-observer');

        //é€šè¿‡lighthouseè·å–
      };
    </script>
  </body>
</html>
